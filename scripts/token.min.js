async function verifyToken(){let e=$("#tokenTextBox").val(),n=await isTokenValid(e);if(n){let e=getParameterByName("returnUrl");window.location.href=e}else $("#errorMessageAlert").toggleClass("invisible")}async function isTokenValid(e){let n=new Headers({"Wanikani-Revision":"20170710",Authorization:"Bearer "+e}),t=new Request("https://api.wanikani.com/v2/user",{method:"GET",headers:n});return fetch(t).then(e=>e.json()).then(n=>!n.code&&(storeToken(e),!0))}function storeToken(e){let n="WaniKaniUserToken";localStorage.setItem(n,e)}function getParameterByName(e,n){n||(n=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=t.exec(n);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}